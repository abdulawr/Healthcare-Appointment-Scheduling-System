# ============================================================
# TEST CONFIGURATION - STAGE 1
# ============================================================
# This configuration is specifically for unit tests
# Uses H2 in-memory database for fast, isolated testing

# Application
quarkus.application.name=billing-service-test
quarkus.test.continuous-testing=disabled

# Database - H2 In-Memory
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=PostgreSQL

# Hibernate - Auto-generate schema from entities
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.sql-load-script=no-file

# ============================================================
# DISABLE KAFKA FOR STAGE 1 TESTS
# ============================================================
quarkus.kafka.devservices.enabled=false

# Disable ALL Kafka channels
mp.messaging.outgoing.invoice-created.enabled=false
mp.messaging.outgoing.payment-processed.enabled=false
mp.messaging.outgoing.refund-issued.enabled=false
mp.messaging.incoming.appointment-completed.enabled=false

# Logging
quarkus.log.level=WARN
quarkus.log.category."com.healthcare.billing".level=INFO
quarkus.log.category."io.quarkus.config".level=ERROR
quarkus.log.console.enable=true

# Disable features not needed for Stage 1 tests
quarkus.swagger-ui.enable=false
quarkus.smallrye-health.ui.enable=false
quarkus.micrometer.enabled=false
quarkus.scheduler.enabled=false