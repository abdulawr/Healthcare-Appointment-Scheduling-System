# Application Configuration
quarkus.application.name=billing-service
quarkus.http.port=8085
quarkus.http.host=0.0.0.0

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=patient_user
quarkus.datasource.password=patient_pass
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/billing_db

# Hibernate Configuration
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# Log Level
quarkus.log.level=INFO
quarkus.log.category."com.basit.billing".level=DEBUG

# OpenAPI and Swagger UI Configuration
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
quarkus.swagger-ui.theme=original
mp.openapi.extensions.smallrye.info.title=Billing Service API
mp.openapi.extensions.smallrye.info.version=1.0.0
mp.openapi.extensions.smallrye.info.description=Healthcare Billing and Payment Management API
mp.openapi.extensions.smallrye.info.contact.email=basit@healthcare.com
mp.openapi.extensions.smallrye.info.contact.name=Basit - Billing Service Team
mp.openapi.extensions.smallrye.info.license.name=Apache 2.0
mp.openapi.extensions.smallrye.info.license.url=https://www.apache.org/licenses/LICENSE-2.0.html

# CORS Configuration (if needed for frontend)
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:3000,http://localhost:4200
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H

# ========================================
# Kafka Configuration (Stage 6)
# Uncomment when implementing Kafka integration
# ========================================
#kafka.bootstrap.servers=localhost:9092

# Outgoing channels for events
#mp.messaging.outgoing.invoice-created.connector=smallrye-kafka
#mp.messaging.outgoing.invoice-created.topic=billing.invoice.created
#mp.messaging.outgoing.invoice-created.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

#mp.messaging.outgoing.payment-processed.connector=smallrye-kafka
#mp.messaging.outgoing.payment-processed.topic=billing.payment.processed
#mp.messaging.outgoing.payment-processed.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

#mp.messaging.outgoing.payment-failed.connector=smallrye-kafka
#mp.messaging.outgoing.payment-failed.topic=billing.payment.failed
#mp.messaging.outgoing.payment-failed.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

#mp.messaging.outgoing.refund-issued.connector=smallrye-kafka
#mp.messaging.outgoing.refund-issued.topic=billing.refund.issued
#mp.messaging.outgoing.refund-issued.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# ========================================
# Health Check Configuration (Stage 8)
# ========================================
quarkus.health.extensions.enabled=true
quarkus.smallrye-health.ui.enable=true
quarkus.smallrye-health.ui.root-path=/health-ui

# ========================================
# Metrics Configuration (Stage 8)
# ========================================
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics
quarkus.micrometer.binder.http-server.enabled=true
quarkus.micrometer.binder.http-client.enabled=true
quarkus.micrometer.binder.jvm.enabled=true
quarkus.micrometer.binder.system.enabled=true

# ========================================
# Fault Tolerance Configuration (Stage 7)
# ========================================
# Circuit breaker defaults
microprofile.faulttolerance.circuitbreaker.delay=10000
microprofile.faulttolerance.circuitbreaker.requestVolumeThreshold=4
microprofile.faulttolerance.circuitbreaker.failureRatio=0.5

# ========================================
# Scheduler Configuration
# ========================================
quarkus.scheduler.enabled=true

# ========================================
# Dev Services (for local development)
# ========================================
# Disable dev services in production
%prod.quarkus.devservices.enabled=false

# Enable dev services for PostgreSQL in dev mode
%dev.quarkus.datasource.devservices.enabled=false
%dev.quarkus.datasource.devservices.image-name=postgres:15
%dev.quarkus.datasource.devservices.port=5432

# ========================================
# Test Configuration
# ========================================
%test.quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.username=test
%test.quarkus.datasource.password=test
%test.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/billing_test_db
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.hibernate-orm.log.sql=false

# Use Testcontainers for testing
%test.quarkus.datasource.devservices.enabled=true

# ========================================
# Production Configuration
# ========================================
%prod.quarkus.hibernate-orm.database.generation=update
%prod.quarkus.hibernate-orm.log.sql=false
%prod.quarkus.log.level=WARN
%prod.quarkus.log.category."com.basit.billing".level=INFO

# ========================================
# Security Configuration (Stage 9 - Optional)
# Uncomment when implementing security
# ========================================
#quarkus.oidc.auth-server-url=http://localhost:8180/realms/healthcare
#quarkus.oidc.client-id=billing-service
#quarkus.oidc.credentials.secret=your-secret-here
#quarkus.oidc.tls.verification=none

# ========================================
# Additional Settings
# ========================================
# HTTP settings
quarkus.http.body.handle-file-uploads=true
quarkus.http.limits.max-body-size=10M

# Jackson configuration
quarkus.jackson.fail-on-unknown-properties=false
quarkus.jackson.write-dates-as-timestamps=false

# Timezone
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n


# ========================================
# Kafka Configuration
# ========================================

# Kafka Bootstrap Server
kafka.bootstrap.servers=localhost:9092

# ========================================
# Outgoing Channels (Event Publishing)
# ========================================

# Invoice Created Events
mp.messaging.outgoing.invoice-created.connector=smallrye-kafka
mp.messaging.outgoing.invoice-created.topic=billing.invoice.created
mp.messaging.outgoing.invoice-created.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Payment Processed Events
mp.messaging.outgoing.payment-processed.connector=smallrye-kafka
mp.messaging.outgoing.payment-processed.topic=billing.payment.processed
mp.messaging.outgoing.payment-processed.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Payment Failed Events
mp.messaging.outgoing.payment-failed.connector=smallrye-kafka
mp.messaging.outgoing.payment-failed.topic=billing.payment.failed
mp.messaging.outgoing.payment-failed.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Refund Issued Events
mp.messaging.outgoing.refund-issued.connector=smallrye-kafka
mp.messaging.outgoing.refund-issued.topic=billing.refund.issued
mp.messaging.outgoing.refund-issued.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Insurance Claim Submitted Events
mp.messaging.outgoing.insurance-claim-submitted.connector=smallrye-kafka
mp.messaging.outgoing.insurance-claim-submitted.topic=billing.insurance.claim.submitted
mp.messaging.outgoing.insurance-claim-submitted.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer

# Payment Reminder Sent Events
mp.messaging.outgoing.payment-reminder-sent.connector=smallrye-kafka
mp.messaging.outgoing.payment-reminder-sent.topic=billing.payment.reminder.sent
mp.messaging.outgoing.payment-reminder-sent.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer